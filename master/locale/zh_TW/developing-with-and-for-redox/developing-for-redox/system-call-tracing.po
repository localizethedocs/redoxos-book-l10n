msgid ""
msgstr ""
"Project-Id-Version: The Redox Operating System\n"
"POT-Creation-Date: 2026-02-09T03:19:51Z\n"
"PO-Revision-Date: \n"
"Last-Translator: \n"
"Language-Team: \n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Language: zh_TW\n"
"Plural-Forms: nplurals=1; plural=0;\n"

#: src/syscall-debug.md:1
msgid "System Call Tracing"
msgstr ""

#: src/syscall-debug.md:3
msgid ""
"If you want to monitor what system calls are being made by a program, to "
"investigate behavior, bugs or performance, there is a mechanism set up to do "
"this."
msgstr ""

#: src/syscall-debug.md:5
msgid ""
"You will learn how to configure the kernel to print a trace of system calls."
msgstr ""

#: src/syscall-debug.md:7
msgid "Modifying the Kernel"
msgstr ""

#: src/syscall-debug.md:9
msgid ""
"You will be modifying the kernel, but you won't be making extensive changes, "
"so you don't need to bother with GitLab stuff, unless you intend to do this "
"frequently. This description assumes you will look after that yourself."
msgstr ""

#: src/syscall-debug.md:11
msgid "The kernel source is in the directory `recipes/core/kernel/source`"
msgstr ""

#: src/syscall-debug.md:12
msgid ""
"If the directory is missing, go to your `redox` directory and run `make f."
"kernel`"
msgstr ""

#: src/syscall-debug.md:14
msgid ""
"Once you have fetched the kernel source into its \"source\" directory, you "
"should disable the `[source]` section of the kernel recipe, so the build "
"system doesn't try to update the kernel code."
msgstr ""

#: src/syscall-debug.md:16
msgid ""
"In the file `recipes/core/kernel/recipe.toml`, comment out the lines in the "
"source section:"
msgstr ""

#: src/syscall-debug.md:18
msgid ""
"```\n"
"# [source]\n"
"# git = \"https://gitlab.redox-os.org/redox-os/kernel.git\"\n"
"```"
msgstr ""

#: src/syscall-debug.md:23
msgid "feature \"syscall_debug\""
msgstr ""

#: src/syscall-debug.md:25
msgid ""
"In order to configure printing out of system calls, you will need to enable "
"the feature \"syscall_debug\" for the kernel."
msgstr ""

#: src/syscall-debug.md:27
msgid ""
"In the file `recipes/core/kernel/source/Cargo.toml`, scroll down to the "
"default features list (maybe around line 50), and add the feature "
"\"syscall_debug\":"
msgstr ""

#: src/syscall-debug.md:29
msgid ""
"```\n"
"default = [\n"
"  \"acpi\",\n"
"  \"multi_core\",\n"
"  \"graphical_debug\",\n"
"  \"serial_debug\",\n"
"  \"self_modifying\",\n"
"  \"x86_kvm_pv\",\n"
"  \"syscall_debug\", <---- Like this\n"
"]\n"
"```"
msgstr ""

#: src/syscall-debug.md:41
msgid "Modify the \"debug.rs\" file"
msgstr ""

#: src/syscall-debug.md:43
msgid ""
"The file `src/syscall/debug.rs` contains the code to print out the system "
"calls that match a particular set of conditions."
msgstr ""

#: src/syscall-debug.md:45
msgid ""
"In the function `debug_start` (maybe around line 228), the boolean "
"`do_debug` determines if the system calls should be printed."
msgstr ""

#: src/syscall-debug.md:47
msgid "It looks like this right now:"
msgstr ""

#: src/syscall-debug.md:49
msgid ""
"```\n"
"pub fn debug_start([a, b, c, d, e, f]: [usize; 6]) {\n"
"    let do_debug = if false && crate::context::current().read().name."
"contains(\"acpid\") {\n"
"        if a == SYS_CLOCK_GETTIME || a == SYS_YIELD || a == SYS_FUTEX {\n"
"            false\n"
"        } else if (a == SYS_WRITE || a == SYS_FSYNC) && (b == 1 || b == 2) "
"{\n"
"            false\n"
"        } else {\n"
"            true\n"
"        }\n"
"    } else {\n"
"        false\n"
"    };\n"
"```"
msgstr ""

#: src/syscall-debug.md:64
msgid ""
"Obviously, the condition `false && whatever` will evaluate to false, so "
"remove the first bit (it's to prevent accidentally turning tracing on)"
msgstr ""

#: src/syscall-debug.md:66
msgid ""
"The program name is read from the context, and compared with the string you "
"specify. The name from the context normally has the full path, so we just "
"use the `contains({name})` test."
msgstr ""

#: src/syscall-debug.md:68
msgid ""
"But if your program is called \"ls\" for example, you will get a system call "
"trace for any program that contains the letters \"ls\", so you could try "
"something like `ends_with(\"/ls\")`."
msgstr ""

#: src/syscall-debug.md:70
msgid ""
"You can modify the boolean expression however you want, assuming you are not "
"publishing the code. You will need something a little fancier if you want "
"messages for more than one program, for example."
msgstr ""

#: src/syscall-debug.md:72
msgid ""
"If you want to hold onto the lock for the context a little longer, you will "
"have to rework the expression a bit."
msgstr ""

#: src/syscall-debug.md:74
msgid ""
"Next, there are some system calls that we skip because they are very "
"frequent and not usually interesting. But if you want to get that level of "
"detail, feel free to modify which system calls are filtered, `gettime`, "
"`yield` and `futex` are typically ignored."
msgstr ""

#: src/syscall-debug.md:76
msgid ""
"Also, writes to file descriptors 1 and 2 (stdout and stderr) are typically "
"not reported so it doesn't interfere with output and debug code from your "
"program as much."
msgstr ""

#: src/syscall-debug.md:78
msgid ""
"A message will be printed at the start of the system call, and a message "
"will be printed when the system call completes."
msgstr ""

#: src/syscall-debug.md:80
msgid "(A flag is set so the kernel knows to print the result.)"
msgstr ""

#: src/syscall-debug.md:82
msgid "Building The Changes"
msgstr ""

#: src/syscall-debug.md:84
msgid ""
"To include these changes in your Redox image, run the following command:"
msgstr ""

#: src/syscall-debug.md:90
msgid "Or (if the above doesn't work)"
msgstr ""

#: src/syscall-debug.md:96
msgid "Where Do The Messages Go"
msgstr ""

#: src/syscall-debug.md:98
msgid ""
"The kernel will print the messages on the console, if you are running `make "
"qemu` the messages will appear in that terminal."
msgstr ""

#: src/syscall-debug.md:100
msgid "Consider to run the following command to capture the output:"
msgstr ""

#: src/syscall-debug.md:106
msgid ""
"If you are doing the testing on real hardware you should probably use the "
"`server` variant and run commands from the console."
msgstr ""
