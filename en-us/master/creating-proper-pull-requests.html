<!DOCTYPE HTML>
<html lang="en_US" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Creating Proper Pull Requests - The Redox Operating System</title>


        <!-- Custom HTML head -->
        <style>
        .light .redox-logo {
            content: url("assets/redox_light_512.png");
        }
        .rust .redox-logo {
            content: url("assets/redox_light_512.png");
        }
        .coal .redox-logo {
            content: url("assets/redox_dark_512.png");
        }
        .navy .redox-logo {
            content: url("assets/redox_dark_512.png");
        }
        .ayu .redox-logo {
            content: url("assets/redox_dark_512.png");
        }
        </style>
        <script type="text/javascript" src="ltd-provenance.js"></script>
        <script type="text/javascript" src="ltd-current.js"></script>
        <script type="text/javascript" src="../../ltd-config.js"></script>
        <script type="text/javascript" src="../../ltd-flyout.js"></script>

        <meta name="description" content="This book carefully describes the design, implementation, direction, and structure of Redox, the operating system.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Redox Operating System</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="creating-proper-pull-requests"><a class="header" href="#creating-proper-pull-requests">Creating Proper Pull Requests</a></h1>
<p>In order for changes you have made to be added to Redox, or other related projects, it is necessary to have someone review your changes, and merge them into the official repository.</p>
<p>This is done by preparing a feature branch, and submitting a merge request.</p>
<p>For small changes, it is sufficient to just submit a pull request. For larger changes, which may require planning or more extensive review, it is better to start by creating an <a href="./filing-issues.html">issue</a>. This provides a shared reference for proposed changes, and a place to collect discussion and feedback related to it.</p>
<p>The steps given below are for the main Redox project repository - submodules and other projects may vary, though most of the approach is the same.</p>
<h3 id="please-note"><a class="header" href="#please-note">Please note:</a></h3>
<ul>
<li><strong>Once you have marked your MR as ready, don't add new commits.</strong></li>
<li><strong>If you need to add new commits mark the MR as draft again.</strong></li>
</ul>
<h2 id="preparing-your-branch"><a class="header" href="#preparing-your-branch">Preparing your branch</a></h2>
<ol>
<li>
<p>In an appropriate directory, e.g. <code>~/tryredox</code>, clone the Redox repository to your computer using the following command:</p>
<pre><code class="language-sh">git clone https://gitlab.redox-os.org/redox-os/redox.git --origin upstream --recursive
</code></pre>
</li>
</ol>
<ul>
<li>If you used <code>podman_bootstrap.sh</code> or <code>native_bootstrap.sh</code> scripts (see the <a href="./podman-build.html">Building Redox</a> page), the <code>git clone</code> was done for you and you can skip this step.</li>
<li>You need to create a <a href="./signing-in-to-gitlab.html#setting-up-pat">Personal Access Token</a> for pushing your code into your repository fork later.</li>
</ul>
<ol start="2">
<li>
<p>Change to the newly created redox directory and rebase to ensure you're using the latest changes:</p>
<pre><code class="language-sh">cd redox
</code></pre>
<pre><code class="language-sh">git rebase upstream master
</code></pre>
</li>
<li>
<p>You should have a fork of the repository on GitLab and a local copy on your computer. The local copy should have two remotes; <code>upstream</code> and <code>origin</code>, <code>upstream</code> should be set to the main repository and <code>origin</code> should be your fork. Log into Redox Gitlab and fork the <a href="https://gitlab.redox-os.org/redox-os/redox">build system repository</a> - look for the button in the upper right.</p>
</li>
<li>
<p>Add your fork to your list of Git remotes with:</p>
<pre><code class="language-sh">git remote add origin https://gitlab.redox-os.org/MY_USERNAME/redox.git
</code></pre>
</li>
</ol>
<ul>
<li>Note: If you made an error in your <code>git remote</code> command, use <code>git remote remove origin</code> and try again.</li>
</ul>
<ol start="5">
<li>
<p>Alternatively, if you already have a fork and copy of the repo, you can simply check to make sure you're up-to-date. Fetch the upstream, rebase with local commits, and update the submodules:</p>
<pre><code class="language-sh">git fetch upstream master
</code></pre>
<pre><code class="language-sh">git rebase upstream/master
</code></pre>
<pre><code class="language-sh">git submodule update --recursive --init
</code></pre>
<p>Usually, when syncing your local copy with the master branch, you will want to rebase instead of merge. This is because it will create duplicate commits that don't actually do anything when merged into the master branch.</p>
</li>
<li>
<p>Before you start to make changes, you will want to create a separate branch, and keep the <code>master</code> branch of your fork identical to the main repository, so that you can compare your changes with the main branch and test out a more stable build if you need to. Create a separate branch:</p>
<pre><code class="language-sh">git checkout -b MY_BRANCH
</code></pre>
</li>
<li>
<p>Make your changes and test them.</p>
</li>
<li>
<p>Commit:</p>
<pre><code class="language-sh">git add . --all
</code></pre>
<pre><code class="language-sh">git commit -m "COMMIT MESSAGE"
</code></pre>
<p>Commit messages should describe their changes in present-tense, e.g. "<code>Add stuff to file.ext</code>" instead of "<code>added stuff to file.ext</code>".
Try to remove duplicate/merge commits from PRs as these clutter up history, and may make it hard to read.</p>
</li>
<li>
<p>Optionally run <a href="https://github.com/rust-lang/rustfmt">rustfmt</a> on the files you changed and commit again if it did anything (check with <code>git diff</code> first).</p>
</li>
<li>
<p>Test your changes with <code>make qemu</code> or <code>make virtualbox</code></p>
</li>
<li>
<p>Pull from upstream:</p>
<pre><code class="language-sh">git fetch upstream
</code></pre>
<pre><code class="language-sh">git rebase upstream/master
</code></pre>
</li>
</ol>
<ul>
<li>Note: try not to use <code>git pull</code>, it is equivalent to doing <code>git fetch upstream; git merge master upstream/master</code></li>
</ul>
<ol start="12">
<li>
<p>Repeat step 10 to make sure the rebase still builds and starts.</p>
</li>
<li>
<p>Push your changes to your fork:</p>
<pre><code class="language-sh">git push origin MY_BRANCH
</code></pre>
</li>
</ol>
<h2 id="submitting-a-merge-request"><a class="header" href="#submitting-a-merge-request">Submitting a merge request</a></h2>
<ol>
<li>On <a href="https://gitlab.redox-os.org/">Redox GitLab</a>, create a Merge Request, following the template. Explain your changes in the title in an easy way and write a short statement in the description if you did multiple changes. <strong>Submit!</strong></li>
<li>Once your merge request is ready, notify reviewers by sending the link to the <a href="https://matrix.to/#/#redox-mrs:matrix.org">Redox Merge Requests</a> room.</li>
</ol>
<h2 id="incorporating-feedback"><a class="header" href="#incorporating-feedback">Incorporating feedback</a></h2>
<p>Sometimes a reviewer will request modifications. If changes are required:</p>
<ol>
<li>
<p>Reply or add a thread to the original merge request notification in the <a href="https://matrix.to/#/#redox-mrs:matrix.org">Redox Merge Requests</a> room indicating that you intend to make additional changes.</p>
<p><strong>Note</strong>: It's best to avoid making large changes or additions to a merge request branch, but if necessary, please indicate in chat that you will be making significant changes.</p>
</li>
<li>
<p>Mark the merge request as "Draft" before pushing any changes to the branch being reviewed.</p>
</li>
<li>
<p>Make any necessary changes.</p>
</li>
<li>
<p>Reply on the same thread in the <a href="https://matrix.to/#/#redox-mrs:matrix.org">Redox Merge Requests</a> room that your merge request is now ready.</p>
</li>
<li>
<p>Mark the merge request as "Ready"</p>
</li>
</ol>
<p>This process communicates that the branch may be changing, and prevents reviewers from expending time and effort reviewing changes that are still in progress.</p>
<h2 id="using-gitlab-web-interface"><a class="header" href="#using-gitlab-web-interface">Using GitLab web interface</a></h2>
<ul>
<li>Update your fork before new changes (click on the button to update the branch in the fork page)</li>
</ul>
<ol>
<li>Fork the repository that you want and click in the "Web IDE" button inside the "Code" blue button.</li>
<li>If you have many changes and prefer a faster review create a branch for each part of the changes by clicking in the button named as "master" or "main" in the bottom left position</li>
<li>Make your changes in the files and click in the "Source Control" button on the left side.</li>
<li>Explain your commits and apply</li>
<li>After the first commit creation a pop-up window will appear suggesting to create a MR, if your changes are ready click on the "Create MR" button.</li>
<li>If you want to make more changes continue in the IDE, once you finish to create commits return to the fork page and reload it</li>
<li>Click on the "Create merge request" button that will appear</li>
<li>Explain your changes and create the MR (you can squash your commits if their names don't contain relevant information)</li>
<li>If your merge request is ready send the link in the <a href="https://matrix.to/#/#redox-mrs:matrix.org">Redox Merge Requests</a> room.</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="creating-proper-bug-reports.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="filing-issues.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="creating-proper-bug-reports.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="filing-issues.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
